@inherits LayoutComponentBase

@inject NavigationManager Navigation

<MatAppBar Style="z-index: 100;" Class="mat" Fixed="true">
    <MatAppBarRow>
        <MatAppBarSection>
            <div class="sr-tt-logo" @onclick="@((e)=> Navigation.NavigateTo(""))">
            </div>
        </MatAppBarSection>
        <MatAppBarSection Align="@MatAppBarSectionAlign.End">
            <AuthorizeView Roles="ProUser">
                <Authorized>
                    <HistoryButton OnHistoryClicked="@((e) => MenuButtonClicked())"></HistoryButton>
                </Authorized>
            </AuthorizeView>
            <Login />
        </MatAppBarSection>
    </MatAppBarRow>
</MatAppBar>

<MatDrawerContainer Style="width: 100vw; height: 100vh;" Class="mat">
    <MatDrawer @bind-Opened="@_navMenuOpened" Mode="@MatDrawerMode.Modal">
        <MatAppBarAdjust></MatAppBarAdjust>
        <History></History>
    </MatDrawer>
    <MatDrawerContent Class="mdc-theme--background">
        <MatAppBarAdjust></MatAppBarAdjust>
        <div class="body-wrapper">
            @Body
        </div>
    </MatDrawerContent>
</MatDrawerContainer>

@code {
    bool _navMenuOpened = false;

    void MenuButtonClicked()
    {
        _navMenuOpened = !_navMenuOpened;
        this.StateHasChanged();
    }
}